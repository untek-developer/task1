
paths:
  /cars:
    get:
      tags:
        - Cars
      summary: Получить список машин
      parameters:
        - $ref: 'app.yaml#/parameters/page'
        - $ref: 'app.yaml#/parameters/limit'
      responses:
        200:
          description: Успешный ответ
          schema:
            $ref: '#/definitions/Cars'
          headers:
            $ref: 'app.yaml#/responseHeaders/paginate'
        422:
          $ref: 'app.yaml#/responses/422UnprocessableEntity'
        401:
          $ref: 'app.yaml#/responses/401Unauthorized'
        403:
          $ref: 'app.yaml#/responses/403Forbidden'
        500:
          $ref: 'app.yaml#/responses/500InternalServerError'
    post:
      tags:
        - Cars
      summary: Создать новую машину
      parameters:
        - $ref: '#/parameters/car'
      responses:
        201:
          $ref: 'app.yaml#/responses/201Created'
        422:
          $ref: 'app.yaml#/responses/422UnprocessableEntity'
        401:
          $ref: 'app.yaml#/responses/401Unauthorized'
        403:
          $ref: 'app.yaml#/responses/403Forbidden'
        500:
          $ref: 'app.yaml#/responses/500InternalServerError'

  /cars/{id}:
    get:
      tags:
        - Cars
      summary: Получить одну машину
      parameters:
        - $ref: 'app.yaml#/parameters/id'
      responses:
        200:
          description: Успешный ответ
          schema:
            $ref: '#/definitions/Car'
        400:
          $ref: 'app.yaml#/responses/400BadRequest'
        401:
          $ref: 'app.yaml#/responses/401Unauthorized'
        403:
          $ref: 'app.yaml#/responses/403Forbidden'
        404:
          $ref: 'app.yaml#/responses/404NotFound'
        500:
          $ref: 'app.yaml#/responses/500InternalServerError'
    patch:
      tags:
        - Cars
      summary: Редактировать машину
      parameters:
        - $ref: 'app.yaml#/parameters/id'
        - $ref: '#/parameters/car'
      responses:
        204:
          $ref: 'app.yaml#/responses/204NoContent'
        422:
          $ref: 'app.yaml#/responses/422UnprocessableEntity'
        401:
          $ref: 'app.yaml#/responses/401Unauthorized'
        403:
          $ref: 'app.yaml#/responses/403Forbidden'
        404:
          $ref: 'app.yaml#/responses/404NotFound'
        500:
          $ref: 'app.yaml#/responses/500InternalServerError'
    delete:
      tags:
        - Cars
      summary: Удалить машину
      parameters:
        - $ref: 'app.yaml#/parameters/id'
      responses:
        204:
          $ref: 'app.yaml#/responses/204NoContent'
        401:
          $ref: 'app.yaml#/responses/401Unauthorized'
        403:
          $ref: 'app.yaml#/responses/403Forbidden'
        404:
          $ref: 'app.yaml#/responses/404NotFound'
        500:
          $ref: 'app.yaml#/responses/500InternalServerError'

parameters:
  car:
    name: car
    in: body
    schema:
      type: object
      properties:
        title:
          type: string
          example: "BMW M5"

definitions:
  Car:
    type: object
    properties:
      id:
        type: integer
        readOnly: true
        example: 1
      title:
        type: string
        example: "Toyota Camry"
      user_id:
        type: integer
      created_at:
        type: string
        example: "2022-10-27T15:03:41.000000Z"
      updated_at:
        type: string
        example: "2022-10-27T15:03:41.000000Z"
  Cars:
    type: array
    items:
      $ref: '#/definitions/Car'
